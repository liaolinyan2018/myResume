<!DOCTYPE html>
<html lang="zh-Hans">
 <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <script src="//at.alicdn.com/t/font_912092_dkghl5t63so.js"></script>
    <style type="text/css">
        .icon {width: 1em; height: 1em;vertical-align: -0.15em;fill: currentColor;overflow: hidden;}
        .site-welcome{display: none;position:fixed;top:0px;left:0px;width:100%;height:100%;background: rgb(239, 239, 239);
                      justify-content: center;align-items: center;z-index: 1;}
        .site-welcome.active{display: flex;}
        .loading{height:200px;width:200px;position:relative;}
        .loading::before,.loading::after{content: '';position:absolute;height:0px;width:0px;border-radius:50%;background:black;
                                        top:0px;bottom:0px;right:0px;left:0px;margin:auto;animation: s 1.6s linear infinite;}
        .loading::after{animation-delay: 0.85s;}
        @keyframes s{   0%{width: 0px;height: 0px;opacity: 0.7;}
                        100%{width: 70px;height: 70px;opacity: 0;}  }
    </style>
    <title>廖淋艳的个人简历</title>
    <link rel="stylesheet" href="./style.css">
 </head>

 <body>
     
    <div id="preloading" class="site-welcome active">
        <div class="loading"></div>
    </div>
     
    <div id="topNavBar" class="topNavBar">
        <div class="topNavBar-inner clearfix">
                <a href="#" class="logo" alt="logo" style="float:left;">
                        <span class="rs">RS</span><span class="card">card</span>
                </a>
                <nav class="menu" style="float:right;">    
                     <ul class="clearfix">
                        <li ><a href="#siteAbout">关于</a></li>        
                        <li ><a href="#siteSkills">技能</a></li>
                        <li>
                            <a href="#sitePortfolio">作品</a>
                            <ul class="submenu">
                                <li>作品1</li>
                                <li>作品2</li>
                                <li>作品3</li>
                            </ul>
                        </li>
                        <li>
                            <a href="#siteBlogs">博客</a>
                            <ul class="submenu">
                                <li>博客1</li>
                                <li>博客2</li>
                                <li>博客3</li>
                            </ul>
                        </li>
                        <li ><a href="#siteCalendar">日历</a></li>
                        <li ><a href="#siteContacts">联系方式</a></li>
                        <li ><a href="#siteOthers">其他</a></li>
                     </ul>
                </nav>
        </div>
    </div>
    <div class="banner">
        <div class="mask"></div>
    </div>
    <main data-x id="siteAbout">
        <div class="userCard">
                <div class="profile clearfix">
                    <div class="picture">
                                <img src="./img/me.jpg" alt="我的头像">
                    </div>
                    <div class="text">
                                <span class="welcome">Hello<span class="triangle"></span>
                                </span>
                                <h1>廖淋艳</h1>
                                <p>前端开发工程师</p>
                                <hr>
                                <dl class="clearfix">
                                    <dt>年龄</dt>
                                    <dd>2x</dd>
                                    <dt>所在城市</dt>
                                    <dd>北京</dd>
                                    <dt>联系方式</dt>
                                    <dd>136xxxxxx18</dd>
                                    <dt>邮箱</dt>
                                    <dd>xxx@gmail.com</dd>
                                </dl>                            
                    </div>                  
                </div>                
                <footer class="media">
                    <a href="#">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-github"></use>
                        </svg>
                    </a>
                    <a href="#">
                        <svg class="icon" aria-hidden="true">
                            <use xlink:href="#icon-Facebook"></use>
                        </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-weibo"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-index-twitter"></use>
                            </svg>
                    </a>
                    <a href="#">
                            <svg class="icon" aria-hidden="true">
                                <use xlink:href="#icon-google"></use>
                            </svg>
                    </a>
                </footer>
        </div>
    </main>
    <section class="download_txt">
        <div class="download_txt_wrapper">
            <a class="downloadResume" href="./myResume.pdf" target="_blank" download>下载PDF简历</a>
        </div>       
        <p>正在学习前端，CSS已经学了几节课了，细节的知识点很多。学会了使用开发者工具进行调试，直接看尺寸，没有用工具去测量。
            正在学习前端，CSS已经学了几节课了，细节的知识点很多。学会了使用开发者工具进行调试，直接看尺寸，没有用工具去测量
        </p>  
    </section>
    <section data-x id="siteSkills" class="skills">
        <h2>技能</h2>
        <ol class="clearfix">
            <li>
                <h3>HTML5&amp;CSS3</h3>
                <div class="progressBar">
                    <div class="progress" style="width:70%;">
                    </div>
                </div>
            </li>
            <li>
                 <h3>JavaScript</h3>
                    <div class="progressBar">
                        <div class="progress" style="width:60%;">
                        </div>
                    </div>
            </li>
            <li>
                 <h3>jQuery</h3>
                    <div class="progressBar">
                        <div class="progress" style="width:40%;">
                        </div>
            </div>
            </li>
            <li>
                 <h3>Vue</h3>
                    <div class="progressBar">
                        <div class="progress" style="width:80%;">
                        </div>
                    </div>
            </li>
            <li>
                 <h3>React</h3>
                    <div class="progressBar">
                        <div class="progress" style="width:90%;">
                        </div>
                    </div>
            </li>
            <li>
                 <h3>HTTP</h3>
                    <div class="progressBar">
                        <div class="progress" style="width:56%;">
                        </div>
                    </div>
            </li>
        </ol>
    </section>
    <section data-x id="sitePortfolio" class="portfolio">
        <h2>作品集</h2>
        <nav>
            <ol class="clearfix">
                <li id="portfolioAll">所有</li>
                <li id="portfolioFrameworks">框架</li>
                <li id="portfolioVallina">原生JS&amp;CSS</li>
            </ol>
            <div id="bar" class="portfolioBar state1">
                <div class="portfolioBar-inner">
                </div>
            </div>
            <script>
                portfolioAll.onclick= function(){
                    bar.className = 'portfolioBar state1'
                }
                portfolioFrameworks.onclick= function(){
                    bar.className = 'portfolioBar state2'
                }
                portfolioVallina.onclick= function(){
                    bar.className = 'portfolioBar state3'
                } 
            </script>
        </nav>
        <div class="works">
            <div class="big">
                <img src="./img/1.jpg" alt="作品1">
            </div>
            <div class="small-1">
                <img src="./img/2.jpg" alt="作品2">
            </div>
            <div class="small-2">
                <img src="./img/3.jpg" alt="作品3">
            </div>
        </div>
    </section>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/16.3.5/Tween.min.js"></script>
    <script>
        /*1.0 loading animation.18-12-2*/
        setTimeout(function(){preloading.classList.remove('active');},2300);
        /*2.0 会动的topNavBar.18-12-2*/
        window.onscroll = function(){
            console.log(window.scrollY)
            if(window.scrollY > 0){topNavBar.classList.add('sticky');}
            else{topNavBar.classList.remove('sticky');}

            /*5.0 某元素出于屏幕中心，menu自动高亮*/
            let specialTags = document.querySelectorAll('[data-x]');//元素hash
            let minIndix = 0;
            for(let i = 1;i<specialTags.length;i++){
                if(Math.abs(specialTags[i].offsetTop - window.scrollY) < Math.abs(specialTags[minIndix].offsetTop - window.scrollY))
                minIndix = i; //找最小距离差
                console.log(minIndix);
            }
            let id = specialTags[minIndix].id;
            console.log(id);
            let a = document.querySelector('a[href="#' + id + '"]'); //通过id找标签
            let li = a.parentNode //a的父元素
            let brothersAndMe = li.parentNode.children //是hash a的兄弟姐妹
            for(let i=0;i<brothersAndMe.length;i++){   //遍历每一个兄弟姐妹，移除active属性
                brothersAndMe[i].classList.remove('active');
            }
            li.classList.add('active');
        }
        /*3.0 加二级菜单18-12-2*/ 
        let liTags = document.querySelectorAll('nav.menu > ul > li');
        //console.log(aTags) //aTags是hash
        for(let i=0;i<liTags.length;i++){
            liTags[i].onmouseenter = function(x){
                //console.log('mouseenter');
                let li = x.currentTarget; //liTags不可靠，最好不要用aTags[i]
                li.classList.add('active');
            }
            liTags[i].onmouseleave = function(y){
                //console.log('mouseleave');
                let li = y.currentTarget; //aTags不可靠，最好不要用aTags[i]
                li.classList.remove('active');
            }
        }
        /*4.0 阻止浏览器默认的滚动，自己设置滚动到指定元素.18-12-2
        let aTags = document.querySelectorAll('nav.menu > ul > li >a')//ATags是个NodeList
        //console.log(aTags);
        for(let i = 0 ; i < aTags.length ; i++){
            aTags[i].onclick = function(x){
                //console.log(x);  //MouseEvent 也是hash
                x.preventDefault();
                let a = x.currentTarget; //当前监听对象
                //console.log(a);
                let href = a.getAttribute('href'); //#siteAbout #siteSkills
                //console.log(href);
                let element = document.querySelector(href); //返回id为siteAbout或siteSkills的元素
                //console.log(element);
                let top = element.offsetTop;  //相对视口的高度，高度不随滑动改变
                //let top = document.querySelector(x.currentTarget.getAttribute('href')).offsetTop; //上面四句可归为一句
                window.scrollTo(0,top - 55);  //(左右滑，上下滑动)手动设置滑动位置，一下就到位了
            }
        }*/

        /*4.1 点击menu,设置自然滚动tween 18-12-5*/
          // 设置循环动画
        function animate(time) {
                    requestAnimationFrame(animate);
                    TWEEN.update(time);
                }
        requestAnimationFrame(animate);
        let aTags = document.querySelectorAll('nav.menu > ul > li >a')//ATags是个NodeList
        //console.log(aTags);
        for(let i = 0 ; i < aTags.length ; i++){
            aTags[i].onclick = function(x){
                //console.log(x);  //MouseEvent 也是hash
                x.preventDefault();
                let top = document.querySelector(x.currentTarget.getAttribute('href')).offsetTop; //上面四句可归为一句
                //window.scrollTo(0,top - 55);  //(左右滑，上下滑动)手动设置滑动位置
                let currentTop = window.scrollY; //当前滑动的高度
               // console.log(currentTop);
                let targetTop = top -48;
                let s = targetTop - currentTop; //距离
                var t = Math.abs((s/100)*100)   //移动时间
                var coords = { y: currentTop }; // 起始点 (0, 0)
                if(t>400){ t = 400; }
                var tween = new TWEEN.Tween(coords) // 创建一个新的tween用来改变 'coords'
                        .to({ y: targetTop }, t) // 在1s内移动至 (300, 200)
                        .easing(TWEEN.Easing.Quadratic.InOut) // 使用缓动功能使的动画更加平滑
                        .onUpdate(function(){ // 在 tween.js 更新 'coords' 后调用
                            // 将 'box' 移动到 'coords' 所描述的位置，配合 CSS 过渡
                            window.scrollTo(0,coords.y);
                        })
                        .start(); // 立即开始 tween
            }
        }
        /*5.0*/
        
    </script>
 </body>
</html>
